{"version":3,"file":"nebular-firebase-auth.mjs","sources":["../../../src/framework/firebase-auth/strategies/base/firebase-base.strategy.ts","../../../src/framework/firebase-auth/strategies/password/firebase-password-strategy.options.ts","../../../src/framework/firebase-auth/strategies/password/firebase-password.strategy.ts","../../../src/framework/firebase-auth/strategies/base/firebase-identity-provider-strategy.options.ts","../../../src/framework/firebase-auth/strategies/google/firebase-google.strategy.ts","../../../src/framework/firebase-auth/strategies/apple/firebase-apple.strategy.ts","../../../src/framework/firebase-auth/strategies/facebook/firebase-facebook.strategy.ts","../../../src/framework/firebase-auth/strategies/twitter/firebase-twitter.strategy.ts","../../../src/framework/firebase-auth/firebase-auth.module.ts","../../../src/framework/firebase-auth/public_api.ts","../../../src/framework/firebase-auth/nebular-firebase-auth.ts"],"sourcesContent":["/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { Injectable } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/compat/auth';\nimport { Observable, of as observableOf, from } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { NbAuthResult, NbAuthIllegalTokenError, NbAuthStrategy } from '@nebular/auth';\n\nimport firebase from 'firebase/compat/app';\nimport UserCredential = firebase.auth.UserCredential;\n\n@Injectable()\nexport abstract class NbFirebaseBaseStrategy extends NbAuthStrategy {\n  constructor(protected afAuth: AngularFireAuth) {\n    super();\n  }\n\n  logout(): Observable<NbAuthResult> {\n    const module = 'logout';\n    return from(this.afAuth.signOut()).pipe(\n      map(() => {\n        return new NbAuthResult(\n          true,\n          null,\n          this.getOption(`${module}.redirect.success`),\n          [],\n          this.getOption(`${module}.defaultMessages`),\n        );\n      }),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n\n  register(data?: any): Observable<NbAuthResult> {\n    throw new Error(`'register' is not supported by '${this.constructor.name}', use 'authenticate'.`);\n  }\n\n  requestPassword(data?: any): Observable<NbAuthResult> {\n    throw new Error(`'requestPassword' is not supported by '${this.constructor.name}', use 'authenticate'.`);\n  }\n\n  resetPassword(data: any = {}): Observable<NbAuthResult> {\n    throw new Error(`'resetPassword' is not supported by '${this.constructor.name}', use 'authenticate'.`);\n  }\n\n  refreshToken(data: any = {}): Observable<NbAuthResult> {\n    throw new Error(`'refreshToken' is not supported by '${this.constructor.name}', use 'authenticate'.`);\n  }\n\n  protected processFailure(error: any, module: string): Observable<NbAuthResult> {\n    const errorMessages = [];\n\n    if (error instanceof NbAuthIllegalTokenError) {\n      errorMessages.push(error.message);\n    } else {\n      errorMessages.push(this.getOption('errors.getter')(module, error, this.options));\n    }\n\n    return observableOf(\n      new NbAuthResult(false, error, this.getOption(`${module}.redirect.failure`), errorMessages, []),\n    );\n  }\n\n  protected processSuccess(res: UserCredential | null, module: string): Observable<NbAuthResult> {\n    return this.afAuth.idToken.pipe(\n      map((token) => {\n        return new NbAuthResult(\n          true,\n          res,\n          this.getOption(`${module}.redirect.success`),\n          [],\n          this.getOption('messages.getter')(module, res, this.options),\n          this.createToken(token),\n        );\n      }),\n    );\n  }\n}\n","/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  getDeepFromObject,\n  NbAuthJWTToken,\n  NbAuthStrategyOptions,\n  NbPasswordStrategyMessage,\n  NbPasswordStrategyModule,\n  NbStrategyToken,\n} from '@nebular/auth';\n\nexport class NbFirebasePasswordStrategyOptions extends NbAuthStrategyOptions {\n  token?: NbStrategyToken = {\n    class: NbAuthJWTToken,\n  };\n  register?: boolean | NbPasswordStrategyModule = {\n    redirect: {\n      success: '/',\n      failure: null,\n    },\n    defaultErrors: ['Something went wrong, please try again.'],\n    defaultMessages: ['You have been successfully registered.'],\n  };\n  login?: boolean | NbPasswordStrategyModule = {\n    redirect: {\n      success: '/',\n      failure: null,\n    },\n    defaultErrors: ['Login/Email combination is not correct, please try again.'],\n    defaultMessages: ['You have been successfully logged in.'],\n  };\n  logout?: boolean | NbPasswordStrategyModule = {\n    redirect: {\n      success: '/',\n      failure: null,\n    },\n    defaultErrors: ['Something went wrong, please try again.'],\n    defaultMessages: ['You have been successfully logged out.'],\n  };\n  refreshToken?: boolean | NbPasswordStrategyModule = {\n    redirect: {\n      success: null,\n      failure: null,\n    },\n    defaultErrors: ['Something went wrong, please try again.'],\n    defaultMessages: ['Your token has been successfully refreshed.'],\n  };\n  requestPassword?: boolean | NbPasswordStrategyModule = {\n    redirect: {\n      success: '/',\n      failure: null,\n    },\n    defaultErrors: ['Something went wrong, please try again.'],\n    defaultMessages: ['Reset password instructions have been sent to your email.'],\n  };\n  resetPassword?: boolean | NbPasswordStrategyModule = {\n    redirect: {\n      success: '/',\n      failure: null,\n    },\n    defaultErrors: ['Something went wrong, please try again.'],\n    defaultMessages: ['Your password has been successfully changed.'],\n  };\n  errors?: NbPasswordStrategyMessage = {\n    key: 'message',\n    getter: (module: string, res, options: NbFirebasePasswordStrategyOptions) => getDeepFromObject(\n      res,\n      options.errors.key,\n      options[module].defaultErrors,\n    ),\n  };\n  messages?: NbPasswordStrategyMessage = {\n    key: 'messages',\n    getter: (module: string, res, options: NbFirebasePasswordStrategyOptions) => getDeepFromObject(\n      res.body,\n      options.messages.key,\n      options[module].defaultMessages,\n    ),\n  };\n}\n\n// eslint-disable-next-line max-len\nexport const firebasePasswordStrategyOptions: NbFirebasePasswordStrategyOptions = new NbFirebasePasswordStrategyOptions();\n","/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { Injectable } from '@angular/core';\nimport firebase from 'firebase/compat/app';\nimport { Observable, of as observableOf, from } from 'rxjs';\nimport { catchError, map, switchMap, take } from 'rxjs/operators';\nimport { NbAuthStrategyOptions, NbAuthStrategyClass, NbAuthResult } from '@nebular/auth';\n\nimport { NbFirebaseBaseStrategy } from '../base/firebase-base.strategy';\nimport {\n  firebasePasswordStrategyOptions,\n  NbFirebasePasswordStrategyOptions,\n} from './firebase-password-strategy.options';\n\n@Injectable()\nexport class NbFirebasePasswordStrategy extends NbFirebaseBaseStrategy {\n  protected defaultOptions: NbFirebasePasswordStrategyOptions = firebasePasswordStrategyOptions;\n\n  static setup(options: NbFirebasePasswordStrategyOptions): [NbAuthStrategyClass, NbAuthStrategyOptions] {\n    return [NbFirebasePasswordStrategy, options];\n  }\n\n  authenticate({ email, password }: any): Observable<NbAuthResult> {\n    const module = 'login';\n    return from(this.afAuth.signInWithEmailAndPassword(email, password)).pipe(\n      switchMap((res) => this.processSuccess(res, module)),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n\n  refreshToken(data?: any): Observable<NbAuthResult> {\n    const module = 'refreshToken';\n    return this.afAuth.authState.pipe(\n      take(1),\n      switchMap((user) => {\n        if (user == null) {\n          return observableOf(\n            new NbAuthResult(false, null, this.getOption(`${module}.redirect.failure`), [\n              \"There is no logged in user so refresh of id token isn't possible\",\n            ]),\n          );\n        }\n        return this.refreshIdToken(user, module);\n      }),\n    );\n  }\n\n  register({ email, password }: any): Observable<NbAuthResult> {\n    const module = 'register';\n    return from(this.afAuth.createUserWithEmailAndPassword(email, password)).pipe(\n      switchMap((res) => this.processSuccess(res, module)),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n\n  requestPassword({ email }: any): Observable<NbAuthResult> {\n    const module = 'requestPassword';\n    return from(this.afAuth.sendPasswordResetEmail(email)).pipe(\n      map(() => {\n        return new NbAuthResult(\n          true,\n          null,\n          this.getOption(`${module}.redirect.success`),\n          [],\n          this.getOption(`${module}.defaultMessages`),\n        );\n      }),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n\n  resetPassword({ code, password }): Observable<NbAuthResult> {\n    const module = 'resetPassword';\n    return from(this.afAuth.confirmPasswordReset(code, password)).pipe(\n      map(() => {\n        return new NbAuthResult(\n          true,\n          null,\n          this.getOption(`${module}.redirect.success`),\n          [],\n          this.getOption(`${module}.defaultMessages`),\n        );\n      }),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n\n  protected updatePassword(user, password, module) {\n    return from(user.updatePassword(password)).pipe(\n      map((token) => {\n        return new NbAuthResult(\n          true,\n          null,\n          this.getOption(`${module}.redirect.success`),\n          [],\n          this.getOption(`${module}.defaultMessages`),\n          this.createToken(token),\n        );\n      }),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n\n  protected refreshIdToken(user: firebase.User, module): Observable<NbAuthResult> {\n    return from(user.getIdToken(true)).pipe(\n      map((token) => {\n        return new NbAuthResult(\n          true,\n          null,\n          this.getOption(`${module}.redirect.success`),\n          [],\n          this.getOption(`${module}.defaultMessages`),\n          this.createToken(token),\n        );\n      }),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n}\n","/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport {\n  NbPasswordStrategyMessage,\n  NbPasswordStrategyModule,\n  NbAuthJWTToken,\n  NbAuthStrategyOptions,\n  NbStrategyToken,\n} from '@nebular/auth';\n\nexport class NbFirebaseIdentityProviderStrategyOptions extends NbAuthStrategyOptions {\n  token?: NbStrategyToken = {\n    class: NbAuthJWTToken,\n  };\n  logout?: boolean | NbPasswordStrategyModule = {\n    redirect: {\n      success: '/',\n      failure: null,\n    },\n    defaultErrors: ['Something went wrong, please try again.'],\n    defaultMessages: ['You have been successfully logged out.'],\n  };\n  authenticate?: boolean | NbPasswordStrategyModule = {\n    redirect: {\n      success: '/',\n      failure: null,\n    },\n    defaultErrors: ['Something went wrong, please try again.'],\n    defaultMessages: ['You have been successfully authenticated.'],\n  };\n  errors?: NbPasswordStrategyMessage = {\n    key: 'message',\n    getter: (module: string, res, options: NbFirebaseIdentityProviderStrategyOptions) => options[module].defaultErrors,\n  };\n  messages?: NbPasswordStrategyMessage = {\n    key: 'message',\n    getter: (module: string, res, options: NbFirebaseIdentityProviderStrategyOptions) => {\n      return options[module].defaultMessages;\n    },\n  };\n  scopes?: string[] = [];\n  customParameters?: { [key: string]: string } = {};\n};\n","/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { Injectable } from '@angular/core';\nimport { from, Observable } from 'rxjs';\nimport { catchError, switchMap } from 'rxjs/operators';\nimport { NbAuthStrategyClass, NbAuthResult, NbAuthStrategyOptions } from '@nebular/auth';\n\nimport { NbFirebaseBaseStrategy } from '../base/firebase-base.strategy';\nimport { NbFirebaseIdentityProviderStrategyOptions } from '../base/firebase-identity-provider-strategy.options';\n\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\n@Injectable()\nexport class NbFirebaseGoogleStrategy extends NbFirebaseBaseStrategy {\n  protected defaultOptions: NbFirebaseIdentityProviderStrategyOptions = new NbFirebaseIdentityProviderStrategyOptions();\n\n  static setup(options: NbFirebaseIdentityProviderStrategyOptions): [NbAuthStrategyClass, NbAuthStrategyOptions] {\n    return [NbFirebaseGoogleStrategy, options];\n  }\n\n  authenticate(data?: any): Observable<NbAuthResult> {\n    const module = 'authenticate';\n    const provider = new firebase.auth.GoogleAuthProvider();\n    const scopes = this.getOption('scopes');\n    scopes.forEach((scope) => provider.addScope(scope));\n    provider.setCustomParameters(this.getOption('customParameters'));\n\n    return from(this.afAuth.signInWithPopup(provider)).pipe(\n      switchMap((res) => this.processSuccess(res, module)),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n}\n","/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { Injectable } from '@angular/core';\nimport { from, Observable } from 'rxjs';\nimport { catchError, switchMap } from 'rxjs/operators';\nimport { NbAuthStrategyClass, NbAuthResult, NbAuthStrategyOptions } from '@nebular/auth';\n\nimport { NbFirebaseBaseStrategy } from '../base/firebase-base.strategy';\nimport { NbFirebaseIdentityProviderStrategyOptions } from '../base/firebase-identity-provider-strategy.options';\n\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\n@Injectable()\nexport class NbFirebaseAppleStrategy extends NbFirebaseBaseStrategy {\n  protected defaultOptions: NbFirebaseIdentityProviderStrategyOptions = new NbFirebaseIdentityProviderStrategyOptions();\n\n  static setup(options: NbFirebaseIdentityProviderStrategyOptions): [NbAuthStrategyClass, NbAuthStrategyOptions] {\n    return [NbFirebaseAppleStrategy, options];\n  }\n\n  authenticate(data?: any): Observable<NbAuthResult> {\n    const module = 'authenticate';\n    const provider = new firebase.auth.OAuthProvider('apple.com');\n    const scopes = this.getOption('scopes');\n    scopes.forEach((scope) => provider.addScope(scope));\n    provider.setCustomParameters(this.getOption('customParameters'));\n\n    return from(this.afAuth.signInWithPopup(provider)).pipe(\n      switchMap((res) => this.processSuccess(res, module)),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n}\n","/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { Injectable } from '@angular/core';\nimport { NbAuthResult, NbAuthStrategyClass, NbAuthStrategyOptions } from '@nebular/auth';\nimport { from, Observable } from 'rxjs';\nimport { catchError, switchMap } from 'rxjs/operators';\n\nimport { NbFirebaseBaseStrategy } from '../base/firebase-base.strategy';\nimport { NbFirebaseIdentityProviderStrategyOptions } from '../base/firebase-identity-provider-strategy.options';\n\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\n@Injectable()\nexport class NbFirebaseFacebookStrategy extends NbFirebaseBaseStrategy {\n  protected defaultOptions: NbFirebaseIdentityProviderStrategyOptions = new NbFirebaseIdentityProviderStrategyOptions();\n\n  static setup(options: NbFirebaseIdentityProviderStrategyOptions): [NbAuthStrategyClass, NbAuthStrategyOptions] {\n    return [NbFirebaseFacebookStrategy, options];\n  }\n\n  authenticate(data?: any): Observable<NbAuthResult> {\n    const module = 'authenticate';\n    const provider = new firebase.auth.FacebookAuthProvider();\n    const scopes = this.getOption('scopes');\n    scopes.forEach((scope) => provider.addScope(scope));\n    provider.setCustomParameters(this.getOption('customParameters'));\n\n    return from(this.afAuth.signInWithPopup(provider)).pipe(\n      switchMap((res) => this.processSuccess(res, module)),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n}\n","/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { Injectable } from '@angular/core';\nimport { Observable, from } from 'rxjs';\nimport { catchError, switchMap } from 'rxjs/operators';\nimport { NbAuthStrategyClass, NbAuthResult, NbAuthStrategyOptions } from '@nebular/auth';\n\nimport { NbFirebaseBaseStrategy } from '../base/firebase-base.strategy';\nimport { NbFirebaseIdentityProviderStrategyOptions } from '../base/firebase-identity-provider-strategy.options';\n\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\n@Injectable()\nexport class NbFirebaseTwitteStrategy extends NbFirebaseBaseStrategy {\n  protected defaultOptions: NbFirebaseIdentityProviderStrategyOptions = new NbFirebaseIdentityProviderStrategyOptions();\n\n  static setup(options: NbFirebaseIdentityProviderStrategyOptions): [NbAuthStrategyClass, NbAuthStrategyOptions] {\n    return [NbFirebaseTwitteStrategy, options];\n  }\n\n  authenticate(data?: any): Observable<NbAuthResult> {\n    const module = 'authenticate';\n    const provider = new firebase.auth.TwitterAuthProvider();\n    provider.setCustomParameters(this.getOption('customParameters'));\n\n    return from(this.afAuth.signInWithPopup(provider)).pipe(\n      switchMap((res) => this.processSuccess(res, module)),\n      catchError((error) => this.processFailure(error, module)),\n    );\n  }\n}\n","/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport { NgModule } from '@angular/core';\n\nimport { NbFirebasePasswordStrategy } from './strategies/password/firebase-password.strategy';\nimport { NbFirebaseGoogleStrategy } from './strategies/google/firebase-google.strategy';\nimport { NbFirebaseAppleStrategy } from './strategies/apple/firebase-apple.strategy';\nimport { NbFirebaseFacebookStrategy } from './strategies/facebook/firebase-facebook.strategy';\nimport { NbFirebaseTwitteStrategy } from './strategies/twitter/firebase-twitter.strategy';\n\n@NgModule({\n  providers: [\n    NbFirebasePasswordStrategy,\n    NbFirebaseGoogleStrategy,\n    NbFirebaseAppleStrategy,\n    NbFirebaseFacebookStrategy,\n    NbFirebaseTwitteStrategy,\n  ],\n})\nexport class NbFirebaseAuthModule {}\n","/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nexport * from\t'./strategies/base/firebase-base.strategy';\nexport * from './strategies/password/firebase-password.strategy';\nexport * from './strategies/password/firebase-password-strategy.options';\nexport * from './strategies/base/firebase-identity-provider-strategy.options';\nexport * from './strategies/google/firebase-google.strategy';\nexport * from './strategies/apple/firebase-apple.strategy';\nexport * from './strategies/facebook/firebase-facebook.strategy';\nexport * from './strategies/twitter/firebase-twitter.strategy';\nexport * from './firebase-auth.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["observableOf"],"mappings":"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"}